<template>
<div id="section">
    <div class="pointer to_left">
        <router-link to="/israel3">&lt;</router-link>
    </div>
    <div class="pointer to_right">
        <router-link to="/pal3">&gt;</router-link>
    </div>
    <div class="left_box">
        <div class="text_box">
            <h1>第一次中東戦争</h1>
            <p>イスラエルが独立宣言を行った翌日の1948年5月15日、アラブ連合軍がイスラエルに侵攻を開始した。国連が可決した分割案は正式に執行はされず、開戦時の勢力圏はおおむね地図のようであったとされている。</p>
        </div>
        <div class="text_box">
            <h1>1948年 6月</h1>
            <p>開戦直後、イスラエル軍はまだ民兵組織に近く、アラブ連合軍の火力に耐えることが難しかった。アラブ連合軍は進撃を続け、いくつかの場所ではイスラエル軍を包囲することに成功した。</p>
        </div>
        <div class="text_box">
            <h1>1948年 11月</h1>
            <p>しかし、組織や戦力をイスラエル軍が整えると反撃に転じた。この反撃は非常に有効であり、アラブ軍は瞬く間に敗退した。序盤にアラブ軍が築いた優位性はそこにはなく、イスラエル軍はそのまま終戦までアラブ軍に対して優位に立ち続けた。</p>
        </div>
        <div class="text_box">
            <h1>1949年 1月</h1>
            <p>年が変わるころにはイスラエルは当初の分割案を大幅に超え、パレスチナ地方の実に78％を支配していた。
            <br>その後も前線が変わることなく、1949年2月に停戦が敷かれた。
            <br>
            <br>こうして第一次中東戦争は終結した。しかしパレスチナ問題は解決とは程遠かった。戦争中、戦火を逃れたアラブ人の難民は50万-70万とされている。こうした難民もまたパレスチナ問題の新たな火種として巻き込まれていくこととなるのである。</p>
        </div>
    </div>
    <!-- <div class="right_box"> -->
    <div class="sticky_box">
        <svg viewBox="0 0 739.3963 1050.4154">
            <g id="palestine"><path class="palestine" d="M98.1455,394.9829,49.7578,471.1914l-4.7041,6.7774L0,532.2266l13.2217,30.028.01-.01L61.147,671.07l.0112.06,20.4744,46.5015,1.59,33.3405,5.8955,5.8306.9179,19.2507,14.668,14.5066,71.437,199.05,7.3616,38.8706,9.9978-10.1533,7.7407.2678-.9563-20.0525,7.032-7.1416L206.05,964.842l8.6421-8.7766-.7143-14.9726,5.4228-5.5069-1.4287-29.945,8.9812-9.1206-3.8222-3.78,13.64-13.8528-.9094-19.0723-4.6614-4.61-1.7854-37.4314,12.2007-12.39-.8164-17.1118-10.041-9.9307,9.175-9.3178-1.6125-33.8145,16.9946-17.259-1.0661-22.354,13.3166-13.524-1.14-23.7351,8.9507-9.09,3.978.1377,4.8047-4.8793-.6455-13.5315-.675-14.1485,9.6094-9.7588-1.2872-26.9892-3.9834-3.94-.0681.0024-11.7109-11.582-.9451-19.8152,18.4422-18.7285L290.92,484.6006l6.6086-6.7114-1.3757-30.24,8.8118-8.9485-.3628-7.6052-2.086-43.7295-6.417-6.3467,5.0127-5.091L298.1,312.7993l7.3147-7.4285-.5952-12.477L301.27,219.97l-5.9666-5.9009,5.2532-5.3345-1.1052-23.1723,14.7422-14.9714-9.8819-9.7734,9.15-9.2925-.42-8.8026h.1467l-.7862-16.4879L310.5507,87.416l-8.7633-8.667,12.7089-12.9065-.9524-19.9634,4.0669-4.13-1.3945-29.2323-11.3889-.3944L292.8943.32,283.6409,0l1.8023,37.7882-7.503,7.62-2.6638,2.7056.4083,8.5559L263.94,56.2626l-7.4559,7.5716-12.4564-.4312L233.2131,52.7076l-37.3059-1.2914-13.2328-.4581L183.6,117.544l-1.1428,1.1607-9.0239,9.1646-5.7181-5.6554-14.2363-.4926L138.6544,257.8749l-33.3131,113.22Z" transform="translate(421.7855)"/></g>
            <g id="stage1"><path class="israel" d="M314.1882,170.8489l-9.8966-9.7882,9.1642-9.3065-.4209-8.816h.147l-.7876-16.5128L310.54,87.5481l-8.7766-8.68,12.7281-12.9259-.9538-19.9936,4.0729-4.1363-1.3966-29.2766-11.4059-.3949L292.8571.3208,283.59,0l1.805,37.8453L277.88,45.4765l-2.6676,2.71.4087,8.5688-11.7631-.4074-7.4669,7.5831-7.67-.2656v82.5843l-28.9181,28.9181L201.91,157.2738V115.4313L183.1043,96.626l.2931,21.0958-1.1446,1.1624-9.0373,9.1785-5.7269-5.664-14.2578-.4933-14.847,136.36L105.02,371.6559,97.8137,395.58l-5.3313,8.3967,9.92,9.92v26.5487L27.8292,515.0178V540.63l78.0346,78.0348s.4492,138.1874.1935,177.7581l69.87,194.6836,7.373,38.9294,10.0127-10.1686,7.7526.2683-.9579-20.083L207.15,992.9l-1.2687-26.5988,8.6551-8.79-.7156-14.9954,5.4311-5.515-1.4308-29.99,8.9949-9.1343-3.8279-3.786,13.6606-13.8737-.9107-19.1012L231.07,856.498,229.2816,819.01l12.2194-12.4092-.8179-17.1377-10.056-9.9458,9.1891-9.3319L238.2009,736.32l5.1613-5.2415V650.0015l21.7426-21.7425V607.9836H292.41l-1.2892-27.03-3.9895-3.9455-.0683.0023-11.7285-11.6-.9464-19.8451,18.47-18.7568-1.4995-31.4316h-45.34L233.18,508.2159v33.6856l-22.5846,22.5847H173.1586L160.5264,551.854H105.7111v-29.62l15.8552-15.8554V487.4606l-7.7242-7.7242V420.65l17.165-17.1652h35.4907l8.7279,8.7277h19.2926v31.1056h23.7561l14.5691-14.5691V421.2L202.327,390.6832H149.4415l-18.4344-18.4343V345.9572l11.8345-11.8344v-35.14l11.2538-11.254V241.7938l52.8253-52.825h33.0731L270.77,219.7451V244.55l9.6463,9.6463h10.5652V199.0744h9.0733l-.6311-13.2316Z" transform="translate(421.7855)"/></g>
            <g id="stage2"><polygon class="israel" points="735.329 45.879 739.396 41.749 738.002 12.517 726.613 12.122 714.68 0.32 705.427 0 707.229 37.788 699.726 45.408 699.726 68.86 682.99 85.596 682.99 128.632 644.073 128.632 644.073 121.165 630.261 107.353 630.261 94.792 637.306 87.748 637.306 71.029 617.693 51.416 604.46 50.958 605.386 117.544 604.243 118.705 595.219 127.869 589.501 122.214 575.265 121.721 560.44 257.875 527.127 371.095 534.753 378.721 546.349 378.721 546.349 386.253 519.93 412.672 519.93 437.903 529.606 437.903 550.772 459.069 561.667 459.069 572.918 447.819 572.918 438.883 600.503 411.298 633.079 411.298 638.28 406.097 645.572 406.097 648.8 402.869 648.8 394.74 596.678 394.74 593.091 398.327 583.289 398.327 583.289 380.812 574.981 380.812 560.458 366.289 560.458 348.718 581.859 327.317 581.859 283.09 592.135 272.815 592.135 241.962 596.917 237.18 596.917 222.595 620.826 191.752 628.955 191.752 634.215 197.012 669.361 197.012 701.878 229.529 715.02 229.529 715.02 156.359 728.656 142.722 734.974 142.722 734.188 126.235 732.336 87.416 723.573 78.749 736.282 65.843 735.329 45.879"/><polygon class="israel" points="541.782 518.232 564.973 495.04 564.973 472.327 552.78 472.327 537.956 457.503 526.719 457.503 511.537 484.479 496.791 484.479 480.014 501.257 480.014 518.269 488.345 526.6 488.345 533.892 472.924 549.314 458.1 549.314 458.1 569.427 481.262 569.427 504.245 592.41 512.314 592.41 539.152 619.248 545.488 619.248 551.345 613.39 551.345 539.033 541.782 529.469 541.782 518.232"/><polygon class="israel" points="577.885 553.378 571.429 546.923 564.973 546.923 558.458 553.378 558.458 559.535 572.744 573.821 593.605 573.821 593.605 557.622 589.361 553.378 577.885 553.378"/></g>
            <g id="stage3"><path class="israel" d="M313.5439,45.8792l4.0669-4.13-1.3946-29.2324-11.3889-.3943L292.8942.32,283.6411,0l1.8022,37.7881-7.5032,7.62v0l-2.6638,2.7053.4082,8.5559-11.7451-.4067-7.4558,7.5717-12.4566-.4314L233.2131,52.7075,195.9072,51.416h0l-13.2327-.458.9255,66.5859-1.143,1.1607-9.0237,9.1645-5.718-5.6552-14.2364-.4927L138.6542,257.875l-33.302,113.1824-.0224-.0225-7.0462,23.948L63.1071,450.3271l14.0086,14.0088v10.4629L37.7343,514.18v23.6281L13.3481,562.1948,61.2851,671.07,190.74,630.3442l19.0479,19.0476h11.6352l11.3172,11.3169v25.1844l4.7136,4.7133,29.2532-29.2529-.1438-3.0176,8.9506-9.09,3.9781.1377,4.8047-4.8793-.6455-13.5315-.6751-14.1485,9.6094-9.7588-1.2871-26.9892-3.9834-3.94-13.451.4919-14.2856,29.6475V619.127L242.0654,636.64H230.35l-44.1845-58.3382V541.6743l-21.6768-21.6765L153.935,509.4441V496.4917l13.5869-13.5864V459.78l47.5264-47.5259h10.4l6.8142-6.8144v-18.888H183.3237V370.936l-5.1851-5.1853V324l-9.4145-9.4141V294.5613l7.95-7.95v-26.42l5.6186-5.6186V228.7517l25.3438-25.3435h11.2373l8.1291,8.1289H244.217l20.5622,20.562h37.2076l-.5789-12.1291-5.9666-5.9009,5.2532-5.3345-1.1052-23.1723,14.7422-14.9715-9.8819-9.7734,9.15-9.2925-.42-8.8025h.0085l-.7861-16.488L310.5507,87.416l-8.7634-8.667,12.709-12.9065Z" transform="translate(421.7855)"/></g>
            <g id="stage4"><path class="israel" d="M81.7707,717.6309l1.59,33.34,5.8955,5.8306.918,19.2509,14.6679,14.5064,71.437,199.05,7.3616,38.8706,9.9978-10.1533,7.7407.268-.9563-20.0527,7.032-7.1416-1.2668-26.5586,8.6421-8.7764-.7144-14.9726,5.4229-5.5069L218.11,905.6406l8.9812-9.1206-3.8222-3.78,13.64-13.8525L236,859.8145l-4.6613-4.61-1.7854-37.4312,12.2006-12.39-.8164-17.1118-10.041-9.9312,9.1751-9.3173-1.6126-33.8145,16.9947-17.2593-1.0662-22.354,13.3166-13.5239-1.14-23.7349,8.9506-9.09,3.9781.1377,4.8047-4.8794-.6455-13.5317-.6751-14.1485,9.6094-9.7583-1.2871-26.99-3.9834-3.9395-.0681.0025-11.711-11.5821-.9451-19.8154,18.4422-18.7285-1.9756-41.4121,6.6086-6.7119-.2683-5.6216h-29.893l-41.45,41.45H202.1132l-8.3354-8.336H179.1916l-14.6594,14.66-.0435-.0434L153.935,509.4438V496.4912l13.5869-13.5859v-23.126l47.5264-47.5259h10.4l6.8142-6.8139V386.5513H183.3237V370.9355l-5.1851-5.185V323.999l-9.4145-9.414V294.561l7.95-7.95V260.1919l5.6186-5.6187V228.7515l25.3438-25.3438h11.2373l8.1291,8.1294H244.217l20.5622,20.5615h37.2076l-.5789-12.1289-5.9666-5.9009,5.2532-5.3344-1.1052-23.1724,14.7422-14.9712-9.8819-9.7734,9.15-9.2925-.42-8.8027h.0085l-.7861-16.4878-1.8516-38.8189-8.7634-8.6665,12.709-12.9067-.9524-19.9634,4.0669-4.13-1.3946-29.2324-11.3889-.3945L292.8942.32,283.6411,0l1.8022,37.7881-7.5032,7.62-2.6638,2.7056.4082,8.5556-11.7451-.4067-7.4558,7.5718-12.4566-.4312L233.2131,52.7075,195.9072,51.416l-13.2327-.458.9255,66.5859-1.143,1.1607-9.0237,9.1645-5.718-5.6552-14.2364-.4927L138.6542,257.8745l-33.302,113.1826-.0224-.0224-7.0462,23.9482L63.1071,450.3271l14.0086,14.0083v10.4634L37.7343,514.18v23.6284L13.3481,562.1943Z" transform="translate(421.7855)"/></g>
        </svg>
    </div>
    <!-- <div id="logging"></div> -->
</div>
</template>
<style scoped>
#section{
    height: 400vh;
    position: relative;
    background-color: #3a3a3a;
}
.sticky_box{
    position: sticky;
    top: 10vh;
    float: right;
    margin-right: 5vw;
    width: 50%;
    height: 75vh;
}
.left_box{
    position: absolute;
    /* display: block; */
    top: 0;
    left: 10%;
    width: 50%;
    height: 100%;
}
.text_box{
    /* position: absolute; */
    margin-top: 20vh;
    margin-left: 10vw;
    width: 60%;
    height: 80vh;
}
.text_box h1{
    font-size: 80px;
    border-bottom: 3px solid #e1e1e1;
    margin-bottom: 25px;
}
svg{
    height: 700px;
    stroke: #fff;
    stroke-width: 3px;
}
.palestine{
    fill:#0e8316;
}
.israel{
    fill:#0071ba;
}
#stage2, #stage3, #stage4{
    opacity: 0;
}
#logging{
    position: sticky;
    opacity: 0.5;
    top: 0;
}
.pointer{
    position: sticky;
    top: 45vh;
    width: 10%;
    z-index: 10;
}
.pointer.to_right{
    float: right;
    right: 3vw;
}
.pointer.to_left{
    float: left;
    left: 3vw;
}
.pointer a{
    text-decoration: none;
    font-size: 500%;
    height: 100%;
}
.pointer.to_left a{
    color: #0071ba;
}
.pointer.to_right a{
    color: #0e8136;
}
</style>
<script>
export default{
    methods:{
        getRatio(el){
            var par = el.parentNode;
            var ratio = (el.scrollTop || par.scrollTop) / (par.scrollHeight - par.clientHeight);
            // document.getElementById("logging").innerHTML = ratio;
            var thresh = 0.6;
            return (ratio >= thresh) ? (ratio - thresh)/(1 - thresh) : 0;
        },
        scrollAnimation(){
            var ratio = this.getRatio(document.body);
            var stage = Math.ceil(ratio * 3);
            if(stage <= 0){
                stage = 1;
            }
            var oldObj = document.getElementById("stage"+stage);
            var newStage = stage + 1;
            var newObj = document.getElementById("stage"+newStage);
            // console.log(ratio);
            
            oldObj.style.opacity = 1 - (3 * ratio - (stage - 1));
            newObj.style.opacity = 3 * ratio - (stage - 1);
            
        }
    },
    created(){
        document.addEventListener("scroll",this.scrollAnimation);
    }
}
</script>